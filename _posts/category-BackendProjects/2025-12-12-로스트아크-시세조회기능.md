---
title: "ë¡œìŠ¤íŠ¸ì•„í¬ ì‹œì„¸ ì¡°íšŒ ê¸°ëŠ¥"
excerpt: "ì•„ì´í…œ ì‹œì„¸ ìˆ˜ì§‘ ì¡°íšŒ êµ¬í˜„"

wirter: Myeongwoo Yoon
categories:
  - BackendProjects
tags:
  - ë¡œìŠ¤íŠ¸ì•„í¬
  
toc: true
toc_sticky: true
use_math: true
 
date: 2025-12-12
last_modified_at: 2025-12-12
---

&ensp;LostArk Open APIë¥¼ ì‚¬ìš©í•´ ì‹œì„¸ë¥¼ ìˆ˜ì§‘í•´ DBì— ì €ì¥í•˜ëŠ” ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ì˜€ë‹¤. ì´ì œ ì´ ë°ì´í„°ë¥¼ í™œìš©í•´ì„œ í”„ë¡ íŠ¸ì—ì„œ ì¡°íšŒí•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì„ êµ¬í˜„í•œë‹¤.

BackEnd
======

&ensp;ì‹œì„¸ ìˆ˜ì§‘ ê¸°ëŠ¥ì„ êµ¬í˜„í–ˆì„ ë•Œ ë§Œë“¤ì—ˆë˜ packageì— ë‹¤ìŒ ê¸°ëŠ¥ì„ ì¶”ê°€ë¡œ êµ¬í˜„í•œë‹¤.
* íŠ¹ì • ì•„ì´í…œ ìµœì‹  ì‹œì„¸ ì¡°íšŒ
* ê¸°ê°„ë³„ ì‹œì„¸ íˆìŠ¤í† ë¦¬ ì¡°íšŒ

&ensp;ë¨¼ì € ìµœì‹  ì‹œì„¸ë¥¼ returní•˜ê¸° ìœ„í•´ DTOë¥¼ í•˜ë‚˜ ì¶”ê°€í•œë‹¤.
```java
@Getter
@NoArgsConstructor
@AllArgsConstructor
public class MarketItemLatestPriceResponse {

    @JsonProperty("ItemId")
    private Long itemId;

    @JsonProperty("Name")
    private String name;

    @JsonProperty("Date")
    private String date;

    @JsonProperty("AvgPrice")
    private Double avgPrice;

    @JsonProperty("TradeCount")
    private Integer tradeCount;
}
```

&ensp;ì „ì— serviceì— ë§Œë“¤ì—ˆë˜ MarketItemServiceì˜ ì—­í• ì„ ë¶„ë¦¬í•œë‹¤(ì±…ì„ ë¶„ë¦¬ ëª…í™•). ê¸°ì¡´ì— ìˆ˜ì§‘ì„ ìœ„í•´ ë§Œë“¤ì—ˆë˜ ì½”ë“œëŠ” `MarketItemCollectService`ë¡œ ë³€ê²½í•˜ê³  ì¡°íšŒë¥¼ ìœ„í•œ ì½”ë“œëŠ” `MarketItemQueryService`ë¡œ ìƒì„±í•œë‹¤.

```java
@Slf4j
@Service
@RequiredArgsConstructor
public class MarketItemQueryService {

    private final MarketItemRepository marketItemRepository;
    private final MarketItemPriceHistoryRepository marketItemPriceHistoryRepository;

    // íŠ¹ì • ì•„ì´í…œ ìµœì‹  ì‹œì„¸ ì¡°íšŒ
    @Transactional
    public MarketItemLatestPriceResponse getLatestPrice(Long itemId) {
        MarketItem item = getItemOrThrow(itemId);

        MarketItemPriceHistory latestHistory = marketItemPriceHistoryRepository.findTopByMarketItem_IdOrderByPriceDateDesc(item.getId())
                .orElseThrow(() ->
                        new IllegalStateException("í•´ë‹¹ ì•„ì´í…œì˜ ì‹œì„¸ ë°ì´í„°ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤."));

        return new MarketItemLatestPriceResponse(
                item.getItemId(),
                item.getName(),
                latestHistory.getPriceDate().toString(),
                latestHistory.getAvgPrice(),
                latestHistory.getTradeCount()
        );
    }

    // ê¸°ê°„ë³„ ì‹œì„¸ íˆìŠ¤í† ë¦¬ ì¡°íšŒ
    @Transactional
    public List<MarketItemStatsResponse> getPriceHistory(Long itemId, LocalDate startDate, LocalDate endDate) {
        MarketItem item = getItemOrThrow(itemId);

        List<MarketItemPriceHistory> histories = marketItemPriceHistoryRepository.findByMarketItem_IdAndPriceDateBetweenOrderByPriceDate(
                item.getId(), startDate, endDate
        );

        return histories.stream()
                .map(MarketItemStatsResponse::from)
                .toList();
    }

    // ì•„ì´í…œ ì¡´ì¬ ì—¬ë¶€ í™•ì¸
    private MarketItem getItemOrThrow(Long itemId) {
        return marketItemRepository.findByItemId(itemId)
                .orElseThrow(() ->
                    new IllegalArgumentException("ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì•„ì´í…œì…ë‹ˆë‹¤. itemId=" + itemId));
    }
}
```

* MarketItemLatestPriceResponse getLatestPrice(Long itemId)
  - MarketPriceHistoryRepositoryì— Optional<MarketItemPriceHistory> findTopByMarketItem_IdOrderByPriceDateDesc(Long itemId)ë¥¼ ì¶”ê°€í•œë‹¤.
  - Springì„ ì‹¤í–‰í–ˆì„ ë•Œ OpenAPIì—ì„œ ì œê³µí•˜ëŠ” ItemIdë¥¼ ì´ìš©í•´ ì¡°íšŒí•˜ë©´ **"í•´ë‹¹ ì•„ì´í…œì˜ ì‹œì„¸ ë°ì´í„°ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤."**ê°€ ì¶œë ¥ë˜ì—ˆë‹¤. ì´ëŠ” ItemPriceHistoryì—ì„œ item í…Œì´ë¸”ì„ ì™¸ë˜í‚¤ ì°¸ì¡°í•˜ê³  ìˆëŠ”ë°, ì´ë•Œ itemPriceHistoryì˜ item_idëŠ” itemì˜ idì™€ ì—°ê²°ë˜ì–´ ìˆê¸° ë•Œë¬¸ì´ì—ˆë‹¤.
  - ê·¸ë˜ì„œ ê¸°ì¡´ findTopByMarketItem_IdOrderByPriceDateDesc(itemId)ë¥¼ item.getId()ë¡œ ìˆ˜ì •í•´ í•´ê²°í•˜ì˜€ë‹¤.
* List<MarketItemStatsResponse> getPriceHistory(Long itemId, LocalDate startDate, LocalDate endDate)
  - MarketPriceHistoryRepositoryì— List<MarketItemPriceHistory> findByMarketItem_IdAndPriceDateBetweenOrderByPriceDate(Long itemId, LocalDate startDate, LocalDate endDate)ë¥¼ ì¶”ê°€í•œë‹¤.
  - stream(): ë¦¬ìŠ¤íŠ¸ë¥¼ í•˜ë‚˜ì”© í˜ë ¤ë³´ë‚´ë©´ì„œ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” íë¦„ìœ¼ë¡œ ë°”ê¿”ì¤Œ
    + histories.stream(): MarketItemPriceHistoryë“¤ì„ í•˜ë‚˜ì”© êº¼ë‚´ì„œ ê°€ê³µí•˜ê² ë‹¤ëŠ” ì„ ì–¸
  - map(): ê° ìš”ì†Œë¥¼ ë‹¤ë¥¸ í˜•íƒœë¡œ ë³€í™˜(ë§¤í•‘)
    + .map(MarketItemStatsResponse::from): histories ì•ˆì˜ ê° ì—”í‹°í‹°ë¥¼ DTOë¡œ ë°”ê¾¸ëŠ” ì‘ì—…
  - ::from: ê° historyë¥¼ DTOë¡œ ë°”ê¿”ì£¼ëŠ” ë³€í™˜ í•¨ìˆ˜
    + ì´ë¥¼ ìœ„í•´ MarketItemStatsResponseì— ë‹¤ìŒì„ ì¶”ê°€í•´ì¤€ë‹¤.
    ```java
    public static MarketItemStatsResponse from(MarketItemPriceHistory history) {
        return new MarketItemStatsResponse(
                history.getPriceDate().toString(),
                history.getAvgPrice(),
                history.getTradeCount()
        );
    }
    ```
  - .toList(): ìŠ¤íŠ¸ë¦¼ì„ ë¦¬ìŠ¤íŠ¸ë¡œ ìˆ˜ì§‘
* MarketItem getItemOrThrow(Long itemId): ì•„ì´í…œ ì¡´ì¬ ì—¬ë¶€ í™•ì¸

&ensp;ì´ì œ ì´ serviceë¥¼ ì‚¬ìš©í•˜ê¸°ìœ„í•´ marketItemcontrollerì— ì¶”ê°€í•œë‹¤.
```java
// íŠ¹ì • ì•„ì´í…œ ìµœì‹  ì‹œì„¸ ì¡°íšŒ
    @GetMapping("/{itemId}/latest")
    public MarketItemLatestPriceResponse getLatestPrice(@PathVariable Long itemId) {
        return marketItemQueryService.getLatestPrice(itemId);
    }

    // ê¸°ê°„ë³„ ì‹œì„¸ íˆìŠ¤í† ë¦¬ ì¡°íšŒ
    @GetMapping("/{itemId}/history")
    public List<MarketItemStatsResponse> getPriceHistory(@PathVariable Long itemId,
            @RequestParam
            @DateTimeFormat(iso = DateTimeFormat.ISO.DATE)
            LocalDate startDate,
            @RequestParam
            @DateTimeFormat(iso = DateTimeFormat.ISO.DATE)
            LocalDate endDate
    ) {
        return marketItemQueryService.getPriceHistory(itemId, startDate, endDate);
    }
```

&ensp;ì´ì œ ë‹¤ìŒ ì‚¬í•­ë“¤ì„ í…ŒìŠ¤íŠ¸ì½”ë“œë¡œ ì‘ì„±í•´ë³¸ë‹¤.
* ì •ìƒ ì•„ì´í…œ ì¡°íšŒ í…ŒìŠ¤íŠ¸
* ë‚ ì§œ ë²”ìœ„ ì¡°íšŒ í…ŒìŠ¤íŠ¸
* ë°ì´í„° ì—†ëŠ” ë‚ ì§œ ì¡°íšŒ ì‹œ ì²˜ë¦¬ ê²€ì¦
* ì˜ëª»ëœ itemId ìš”ì²­ ì‹œ ì˜ˆì™¸ í…ŒìŠ¤íŠ¸

```java
@SpringBootTest
@Transactional
class MarketItemQueryServiceTest {

    @Autowired
    private MarketItemQueryService marketItemQueryService;

    @Autowired
    private MarketItemRepository marketItemRepository;

    @Autowired
    private MarketItemPriceHistoryRepository marketItemPriceHistoryRepository;

    private MarketItem item;

    @BeforeEach
    void setUp() {
        // ì™¸ë¶€ ID = 652039050
        item = marketItemRepository.save(
                MarketItem.builder()
                        .itemId(652039050L)
                        .name("í…ŒìŠ¤íŠ¸ ì•„ì´í…œ")
                        .build()
        );

        marketItemPriceHistoryRepository.save(
                MarketItemPriceHistory.builder()
                        .marketItem(item)
                        .priceDate(LocalDate.of(2025, 12, 1))
                        .avgPrice(1000.0)
                        .tradeCount(10)
                        .build()
        );

        marketItemPriceHistoryRepository.save(
                MarketItemPriceHistory.builder()
                        .marketItem(item)
                        .priceDate(LocalDate.of(2025, 12, 2))
                        .avgPrice(1200.0)
                        .tradeCount(12)
                        .build()
        );
    }

    @Test
    void ì •ìƒ_ì•„ì´í…œ_ê¸°ê°„ë³„_ì¡°íšŒ() {
        List<MarketItemStatsResponse> result =
                marketItemQueryService.getPriceHistory(
                        652039050L,
                        LocalDate.of(2025, 12, 1),
                        LocalDate.of(2025, 12, 2)
                );

        Assertions.assertThat(result).hasSize(2);
        Assertions.assertThat(result.get(0).getAvgPrice()).isEqualTo(1000.0);
        Assertions.assertThat(result.get(1).getAvgPrice()).isEqualTo(1200.0);
    }

    @Test
    void ë‚ ì§œ_ë²”ìœ„ë¡œ_ë¶€ë¶„_ì¡°íšŒ() {
        List<MarketItemStatsResponse> result =
                marketItemQueryService.getPriceHistory(
                        652039050L,
                        LocalDate.of(2025, 12, 2),
                        LocalDate.of(2025, 12, 2)
                );

        Assertions.assertThat(result).hasSize(1);
        Assertions.assertThat(result.get(0).getDate()).isEqualTo("2025-12-02");
    }

    @Test
    void ë°ì´í„°_ì—†ëŠ”_ë‚ ì§œ_ì¡°íšŒì‹œ_ë¹ˆë¦¬ìŠ¤íŠ¸_ë°˜í™˜() {
        List<MarketItemStatsResponse> result =
                marketItemQueryService.getPriceHistory(
                        652039050L,
                        LocalDate.of(2025, 11, 1),
                        LocalDate.of(2025, 11, 5)
                );

        Assertions.assertThat(result).isEmpty();
    }

    @Test
    void ì¡´ì¬í•˜ì§€_ì•ŠëŠ”_ì•„ì´í…œID_ì¡°íšŒì‹œ_ì˜ˆì™¸ë°œìƒ() {
        assertThatThrownBy(() ->
                marketItemQueryService.getPriceHistory(
                        99999999L,
                        LocalDate.of(2025, 12, 1),
                        LocalDate.of(2025, 12, 2)
                )
        ).isInstanceOf(IllegalArgumentException.class);
    }

}
```

* @BeforeEach: ê° í…ŒìŠ¤íŠ¸ ë©”ì„œë“œ ì‹¤í–‰ ì§ì „ì— íŠ¹ì • ì´ˆê¸°í™” ë¡œì§ì„ ë°˜ë³µì ìœ¼ë¡œ ì‹¤í–‰í•˜ë„ë¡ í•˜ëŠ” ì–´ë…¸í…Œì´ì…˜ìœ¼ë¡œ, í…ŒìŠ¤íŠ¸ ë©”ì„œë“œë§ˆë‹¤ ë…ë¦½ì ì¸ í™˜ê²½ì„ ë³´ì¥í•˜ê³  ì½”ë“œ ì¤‘ë³µì„ í”¼í•˜ê¸° ìœ„í•´ ì‚¬ìš©

ëŒ€ëŸ‰ ë°ì´í„° ì¡°íšŒ ì‹œ ì„±ëŠ¥ ê³ ë ¤ (ì¿¼ë¦¬ ìµœì í™”)
------

&ensp;ì‹œì„¸ íˆìŠ¤í† ë¦¬ ë°ì´í„°ëŠ” í•˜ë£¨ ë‹¨ìœ„ë¡œ ì§€ì†ì ìœ¼ë¡œ ëˆ„ì ë˜ë©°, ì¥ê¸°ì ìœ¼ë¡œëŠ” ì•„ì´í…œë³„ë¡œ ìˆ˜ë°±~ìˆ˜ì²œ ê±´ ì´ìƒì˜ ì‹œê³„ì—´ ë°ì´í„°ê°€ ì €ì¥ëœë‹¤. í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ì‹œì„¸ ë³€í™”ë¥¼ ì°¨íŠ¸ë¡œ ì‹œê°í™”í•˜ê¸° ìœ„í•´ì„œëŠ” íŠ¹ì • ì•„ì´í…œì˜ ì¼ì • ê¸°ê°„ ë°ì´í„°ë¥¼ í•œ ë²ˆì— ì¡°íšŒí•´ì•¼ í•˜ë¯€ë¡œ, ëŒ€ëŸ‰ ë°ì´í„° í™˜ê²½ì—ì„œë„ ì•ˆì •ì ì¸ ì¡°íšŒ ì„±ëŠ¥ì„ ë³´ì¥í•  í•„ìš”ê°€ ìˆì—ˆë‹¤.

&ensp;ì‹œì„¸ ì¡°íšŒ ê¸°ëŠ¥ì—ì„œ ì‚¬ìš©ë˜ëŠ” ì¿¼ë¦¬ëŠ” ë‹¤ìŒê³¼ ê°™ì€ íŠ¹ì§•ì„ ê°€ì§„ë‹¤.

* íŠ¹ì • ì•„ì´í…œ 1ê°œ ê¸°ì¤€ ì¡°íšŒ
* ë‚ ì§œ ë²”ìœ„ ì¡°ê±´(startDate ~ endDate)
* ë‚ ì§œ ì˜¤ë¦„ì°¨ìˆœ ì •ë ¬ (ì°¨íŠ¸ ì‹œê°í™” ëª©ì )

```sql
SELECT *
FROM market_item_price_history
WHERE item_id = ?
  AND price_date BETWEEN ? AND ?
ORDER BY price_date;
```

&ensp;ì´ì™€ ê°™ì€ ì¿¼ë¦¬ëŠ” ì¸ë±ìŠ¤ê°€ ì¡´ì¬í•˜ì§€ ì•Šì„ ê²½ìš° ë°ì´í„° ì¦ê°€ì— ë”°ë¼ í’€ í…Œì´ë¸” ìŠ¤ìº”ì´ ë°œìƒí•  ìˆ˜ ìˆìœ¼ë©°, ì´ëŠ” ì¡°íšŒ ì„±ëŠ¥ ì €í•˜ì˜ ì›ì¸ì´ ë  ìˆ˜ ìˆë‹¤.<br/>
&ensp;íŠ¹íˆ item_id ë‹¨ì¼ ì¸ë±ìŠ¤ë§Œ ì‚¬ìš©í•  ê²½ìš° ë‚ ì§œ ë²”ìœ„ ë° ì •ë ¬ ê³¼ì •ì—ì„œ ì¶”ê°€ì ì¸ ì •ë ¬ ë¹„ìš©ì´ ë°œìƒí•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ, ì¡°íšŒ ì¡°ê±´ê³¼ ì •ë ¬ ì¡°ê±´ì„ ë™ì‹œì— ë§Œì¡±í•˜ëŠ” (item_id, price_date) ê¸°ì¤€ì˜ ë³µí•© ì¸ë±ìŠ¤ë¥¼ ì¶”ê°€í•˜ì˜€ë‹¤.<br/>
&ensp;ì´ë¥¼ í†µí•´ DBëŠ” item_id ì¡°ê±´ìœ¼ë¡œ ë¨¼ì € ê²€ìƒ‰ ë²”ìœ„ë¥¼ ì¶•ì†Œí•œ ë’¤, price_date ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬ëœ ì¸ë±ìŠ¤ë¥¼ í™œìš©í•˜ì—¬ ì¶”ê°€ ì •ë ¬ ì—†ì´ ê²°ê³¼ë¥¼ ë°˜í™˜í•  ìˆ˜ ìˆë‹¤.

```java
@Entity
@Table(
    name = "market_item_price_history",
    indexes = {
        @Index(
            name = "idx_market_item_date",
            columnList = "item_id, price_date"
        )
    }
)
public class MarketItemPriceHistory {
    ...
}
```

* item_id ì¡°ê±´ìœ¼ë¡œ ì¡°íšŒ ë²”ìœ„ë¥¼ ì¦‰ì‹œ ì¶•ì†Œ
* price_date ê¸°ì¤€ ë²”ìœ„ ê²€ìƒ‰(BETWEEN) ìµœì í™”
* ORDER BY price_date ì •ë ¬ ë¹„ìš© ìµœì†Œí™”

&ensp;ë³¸ ê¸°ëŠ¥ì€ í˜ì´ì§€ ë‹¨ìœ„ ì¡°íšŒê°€ ì•„ë‹Œ ì‹œê³„ì—´ ì°¨íŠ¸ ì‹œê°í™”ë¥¼ ìœ„í•œ ë°ì´í„° ì¡°íšŒë¥¼ ëª©ì ìœ¼ë¡œ í•œë‹¤. ë”°ë¼ì„œ ë³¸ ê¸°ëŠ¥ì—ì„œëŠ” ì¼ë°˜ì ì¸ ëª©ë¡ ì¡°íšŒì— ì‚¬ìš©ë˜ëŠ” í˜ì´ì§•(Pageable) ë°©ì‹ë³´ë‹¤ëŠ”, ê¸°ê°„ ì¡°ê±´ ê¸°ë°˜ ì¡°íšŒê°€ ìš”êµ¬ì‚¬í•­ê³¼ ë” ë¶€í•©í•œë‹¤ê³  íŒë‹¨í•˜ì˜€ë‹¤.

* ì°¨íŠ¸ ë Œë”ë§ ì‹œ ì „ì²´ ê¸°ê°„ ë°ì´í„°ë¥¼ í•œ ë²ˆì— í•„ìš”
* ì¼ë°˜ì ì¸ ì¡°íšŒ ë²”ìœ„ëŠ” ìˆ˜ê°œì›” ~ 1ë…„ ì´ë‚´
* ì¸ë±ìŠ¤ë¥¼ í™œìš©í•œ ì¡°ê±´ ì¡°íšŒê°€ í˜ì´ì§•ë³´ë‹¤ íš¨ìœ¨ì 

FrontEnd
======

&ensp;ì•„ì´í…œì˜ ì •ë³´ë¥¼ ë³´ì—¬ì¤„ í˜ì´ì§€ë¥¼ Figmaë¡œ ë””ìì¸ í•´ë³´ì•˜ë‹¤.<br/>
<p align="center"><img src="/assets/img/BackendProjects/LostArk/ì‹œì„¸ ì¡°íšŒ ê¸°ëŠ¥/2-1-ì‹œì„¸ ì •ë³´ í˜ì´ì§€.png" width="500"></p>

Router ì„¤ì •
------

&ensp;ë¨¼ì € ì‹œì„¸ ì¡°íšŒ í˜ì´ì§€ë¡œ ì´ë™í•˜ê¸° ìœ„í•œ ë¼ìš°í„° ì„±ì •ë¶€í„° ì§„í–‰í•œë‹¤.
```javascript
import { BrowserRouter, Routes, Route } from 'react-router-dom';
import Header from '../components/header/Header';
import MainPage from '../pages/main/MainPage';
import MarketItemPage from '../pages/market/MarketItemPage';

const Router = () => {
  return (
    <BrowserRouter>
      <Header />

      <Routes>
        <Route path="/" element={<MainPage />} />
        <Route path="/market/items" element={<MarketItemPage />} />
      </Routes>
    </BrowserRouter>
  );
};

export default Router;
```

* /: ë©”ì¸ í˜ì´ì§€
* /markte/items: ì•„ì´í…œ í˜ì´ì§€

MarketItemPage
------

&ensp;MarketItemPageëŠ” ì•„ì´í…œ ì‹œì„¸ ì¡°íšŒ ê¸°ëŠ¥ì˜ ì§„ì…ì ìœ¼ë¡œ ê²€ìƒ‰, ì¹´í…Œê³ ë¦¬ í•„í„°ë§, ì•„ì´í…œ ì„ íƒ, ìƒì„¸ ì¡°íšŒê¹Œì§€ì˜ ì „ì²´ ìƒíƒœë¥¼ ê´€ë¦¬í•˜ëŠ” ì»¨í…Œì´ë„ˆ ì—­í• ì„ ìˆ˜í–‰í•œë‹¤.

```javascript
import { useState } from 'react';
import ItemSearchBar from './components/ItemSearchBar/ItemSearchBar';
import CategoryTabs from './components/CategoryTabs/CategoryTabs';
import ItemList from './components/ItemList/ItemList';
import ItemDetail from './components/ItemDetail/ItemDetailHeader';
import { mockMarketItems } from './constants/mockMarketItems';
import { ITEM_CATEGORY } from './constants/itemCategory';
import './MarketItemPage.css';

const MarketItemPage = () => {
  const [searchKeyword, setSearchKeyword] = useState('');
  const [selectedCategory, setSelectedCategory] = useState(ITEM_CATEGORY.ALL);
  const [selectedItem, setSelectedItem] = useState(null); // â­ í•µì‹¬

  return (
    <div className="market-page">
      <div className="market-layout">
        <aside className="market-sidebar">
          <div className="market-search">
            <ItemSearchBar onSearch={setSearchKeyword} />
          </div>

          <CategoryTabs
            selectedCategory={selectedCategory}
            onSelect={setSelectedCategory}
          />

          <div className="market-list">
            <ItemList
              items={mockMarketItems}
              searchKeyword={searchKeyword}
              selectedCategory={selectedCategory}
              selectedItem={selectedItem}
              onSelectItem={setSelectedItem}
            />
          </div>
        </aside>

        <section className="market-content">
          <ItemDetail item={selectedItem} />
        </section>
      </div>
    </div>
  );
};

export default MarketItemPage;
```

* State ì„¤ê³„
  ```javascript
  const [searchKeyword, setSearchKeyword] = useState('');
  const [selectedCategory, setSelectedCategory] = useState(ITEM_CATEGORY.ALL);
  const [selectedItem, setSelectedItem] = useState(null);
  ```
  - searchKeyword: ì•„ì´í…œ ê²€ìƒ‰ í‚¤ì›Œë“œ
  - selectedCategory: ì„ íƒëœ ì•„ì´í…œ ì¹´í…Œê³ ë¦¬
  - selectedItem: í˜„ì¬ ì„ íƒëœ ì•„ì´í…œ(ìƒì„¸ ì¡°íšŒ ëŒ€ìƒ)
* ë ˆì´ì•„ì›ƒ êµ¬ì¡°
  - í™”ë©´ì€ í¬ê²Œ ì¢Œì¸¡ ì‚¬ì´ë“œë°”ì™€ ìš°ì¸¡ ìƒì„¸ ì˜ì—­ êµ¬ì¡°ë¡œ ë‚˜ë‰œë‹¤.
  ```javascript
  <div className="market-layout">
  <aside className="market-sidebar">
    {/* ê²€ìƒ‰ + ì¹´í…Œê³ ë¦¬ + ë¦¬ìŠ¤íŠ¸ */}
  </aside>

  <section className="market-content">
    {/* ì•„ì´í…œ ìƒì„¸ */}
  </section>
  </div>
  ```
  - ì¢Œì¸¡: ì•„ì´í…œ íƒìƒ‰ ì˜ì—­
  - ìš°ì¸¡: ì„ íƒ ì•„ì´í…œ ìƒì„¸ ì •ë³´
  ```css
  /* ì™¼ìª½ ì‚¬ì´ë“œë°” */
  .market-sidebar {
    width: 530px;
    min-width: 530px;

    background-color: #ffffff;
    border: 1px solid #e5e7eb;
    border-radius: 8px;

    display: flex;
    flex-direction: column;
    height: 100%;
  }

  /* ì•„ì´í…œ ë¦¬ìŠ¤íŠ¸ */
  .market-list {
    flex: 1;
    overflow-y: auto;
    padding: 16px;
  }
  ```
  - ì•„ì´í…œ ë¦¬ìŠ¤íŠ¸ë§Œ ìŠ¤í¬ë¡¤
  - ìƒì„¸ ì˜ì—­ì€ ë…ë¦½ì ìœ¼ë¡œ ê³ ì •
* ê²€ìƒ‰ ì˜ì—­
  ```javascript
  <ItemSearchBar onSearch={setSearchKeyword} />
  ```
  - ê²€ìƒ‰ì–´ ì…ë ¥ì€ MarketItemPageì—ì„œ ìƒíƒœë¡œ ê´€ë¦¬
  - ItemSearchBarëŠ” ì…ë ¥ ì´ë²¤íŠ¸ë§Œ ì „ë‹¬í•˜ëŠ” ì œì–´ ì»´í¬ë„ŒíŠ¸
* ì¹´í…Œê³ ë¦¬ í•„í„°
  ```javascript
  <CategoryTabs
    selectedCategory={selectedCategory}
    onSelect={setSelectedCategory}
  />
  ```
  - í˜„ì¬ ì„ íƒëœ ì¹´í…Œê³ ë¦¬ë¥¼ ìƒíƒœë¡œ ìœ ì§€
  - ITEM_CATEGORY ìƒìˆ˜ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë™ì‘
* ì•„ì´í…œ ë¦¬ìŠ¤íŠ¸
  ```javascript
  <ItemList
    items={mockMarketItems}
    searchKeyword={searchKeyword}
    selectedCategory={selectedCategory}
    selectedItem={selectedItem}
    onSelectItem={setSelectedItem}
  />
  ```
  - ItemListëŠ” ì•„ì´í…œ ëª©ë¡ ë Œë”ë§, ê²€ìƒ‰ì–´ / ì¹´í…Œê³ ë¦¬ ê¸°ì¤€ í•„í„°ë§, ì•„ì´í…œ í´ë¦­ì‹œ onSelectItem í˜¸ì¶œ
* ì•„ì´í…œ ìƒì„¸
  ```javascript
  <ItemDetail item={selectedItem} />
  ```
  - ì„ íƒëœ ì•„ì´í…œì´ ì—†ì„ ê²½ìš°: ì•ˆë‚´ UI í‘œì‹œ
  - ì•„ì´í…œì´ ì„ íƒë˜ë©´ ìƒì„¸ ì •ë³´ ë Œë”ë§

Header
------

ItemSearchBar
------

&ensp;ItemSearchbarëŠ” ì•„ì´í…œ ëª©ë¡ì—ì„œ ì•„ì´í…œ ì´ë¦„ì„ ê¸°ì¤€ìœ¼ë¡œ ê²€ìƒ‰í•˜ê¸° ìœ„í•œ ì…ë ¥ ì»´í¬ë„ŒíŠ¸ì´ë‹¤.
```javascript
import { useState } from 'react';
import './ItemSearchBar.css';

const ItemSearchBar = ({ onSearch }) => {
  const [keyword, setKeyword] = useState('');

  const handleChange = (e) => {
    setKeyword(e.target.value);
    onSearch?.(e.target.value);
  };

  return (
    <div className="item-search-bar">
      <span className="search-icon">ğŸ”</span>
      <input
        type="text"
        placeholder="ì•„ì´í…œ ì´ë¦„ ê²€ìƒ‰"
        value={keyword}
        onChange={handleChange}
      />
    </div>
  );
};

export default ItemSearchBar;
```

* ì»´í¬ë„ŒíŠ¸ ì—­í• 
  ```javascript
  const ItemSearchBar = ({ onSearch }) => { ... }
  ```
  - ê²€ìƒ‰ ì…ë ¥ UI ì œê³µ
  - ì…ë ¥ ì´ë²¤íŠ¸ ë°©ìƒ ì‹œ ìƒìœ„ ì»´í¬ë„ŒíŠ¸ë¡œ ê°’ ì „ë‹¬
* State ì„¤ê³„
  ```javascript
  const [keyword, setKeyword] = useState('');
  ```
  - ì…ë ¥ í•„ë“œëŠ” ì œì–´ ì»´í¬ë„ŒíŠ¸ ë°©ì‹ìœ¼ë¡œ êµ¬í˜„
  ```javascript
  <input
    type="text"
    placeholder="ì•„ì´í…œ ì´ë¦„ ê²€ìƒ‰"
    value={keyword}
    onChange={handleChange}
  />
  ```
  - inputì˜ valueëŠ” í•­ìƒ React ìƒíƒœì™€ ë™ê¸°í™”
* ì…ë ¥ ì´ë²¤íŠ¸ ì²˜ë¦¬
  ```javascript
  const handleChange = (e) => {
    setKeyword(e.target.value);
    onSearch?.(e.target.value);
  };
  ```
  - ì…ë ¥ ê°’ ë³€ê²½ ì‹œ ë‚´ë¶€ ìƒíƒœ ì—…ë°ì´íŠ¸, ìƒìœ„ ì»´í¬ë„ŒíŠ¸ì— ì¦‰ì‹œ ì „ë‹¬
  - onSearch?.() ë¬¸ë²•ì„ ì‚¬ìš©í•´ ì½œë°±ì´ ì—†ëŠ” ê²½ìš°ì—ë„ ì•ˆì „í•˜ê²Œ ë™ì‘

CategoryTabs
------

&ensp;ì•„ì´í…œ ì‹œì„¸ ì¡°íšŒ í˜ì´ì§€ì—ì„œëŠ” ë‹¤ì–‘í•œ ì•„ì´í…œì„ ì¹´í…Œê³ ë¦¬ë³„ë¡œ ë¹ ë¥´ê²Œ íƒìƒ‰í•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤. ì´ë¥¼ ìœ„í•´ CategoryTabs ì»´í¬ë„ŒíŠ¸ë¥¼ ë³„ë„ë¡œ ë¶„ë¦¬í•˜ê³ , UI í‘œí˜„ê³¼ ë„ë©”ì¸ ì¹´í…Œê³ ë¦¬ ì •ì˜ë¥¼ ëª…í™•íˆ ë¶„ë¦¬í•˜ì—¬ ì„¤ê³„í–ˆë‹¤.
```javascript
import { CATEGORY_TABS } from '../../constants/categoryTabs';
import './CategoryTabs.css';

const CategoryTabs = ({ selectedCategory, onSelect }) => {
  return (
    <div className="category-tabs">
      {CATEGORY_TABS.map((tab) => (
        <button
          key={tab.value}
          className={`category-tab ${
            selectedCategory === tab.value ? 'active' : ''
          }`}
          onClick={() => onSelect(tab.value)}
        >
          {tab.label}
        </button>
      ))}
    </div>
  );
};

export default CategoryTabs;
```

* ì»´í¬ë„ŒíŠ¸ ì—­í• 
  ```javascript
  const CategoryTabs = ({ selectedCategory, onSelect }) => { ... }
  ```
  - ì¹´í…Œê³ ë¦¬ íƒ­ UI ë Œë”ë§
  - ì„ íƒëœ ì¹´í…Œê³ ë¦¬ ê°•ì¡° í‘œì‹œ
  - í´ë¦­ ì´ë²¤íŠ¸ ë°©ìƒ ì‹œ ìƒìœ„ ì»´í¬ë„ŒíŠ¸ë¡œ ê°’ ì „ë‹¬
* ì¹´í…Œê³ ë¦¬ ë°ì´í„° êµ¬ì¡° ë¶„ë¦¬
  ```javascript
  export const ITEM_CATEGORY = {
  ALL: 'ALL',

  // ===== UIì— ë…¸ì¶œë˜ëŠ” ì¹´í…Œê³ ë¦¬ =====
  ENGRAVING: 'ENGRAVING',       // ê°ì¸ì„œ
  REFORGING: 'REFORGING',       // ê°•í™” ì¬ë£Œ (ë¬´ê¸° ì§„í™” ì¬ë£Œ í¬í•¨)
  ARK_GRID: 'ARK_GRID',         // ì•„í¬ ê·¸ë¦¬ë“œ ì¬ë£Œ
  GEM: 'GEM',                   // ë³´ì„
  ACCESSORY: 'ACCESSORY',       // ì•…ì„¸ì„œë¦¬
  LIFESKILL: 'LIFESKILL',       // ìƒí™œ

  // ===== UIì—ëŠ” ì•ˆ ë³´ì´ì§€ë§Œ ë°ì´í„°ì—ëŠ” ì¡´ì¬ =====
  BATTLE_ITEM: 'BATTLE_ITEM',   // ì „íˆ¬ ìš©í’ˆ
  COOKING: 'COOKING',           // ìš”ë¦¬
  };
  ```
  - ë„ë©”ì¸ ê¸°ì¤€ ì¹´í…Œê³ ë¦¬
  ```javascript
  import { ITEM_CATEGORY } from './itemCategory';

  export const CATEGORY_TABS = [
    { label: 'ì „ì²´', value: ITEM_CATEGORY.ALL },
    { label: 'ì¬ë ¨ ì¬ë£Œ', value: ITEM_CATEGORY.REFORGING },
    { label: 'ê°ì¸ì„œ', value: ITEM_CATEGORY.ENGRAVING },
    { label: 'ì•„í¬ ê·¸ë¦¬ë“œ ì¬ë£Œ', value: ITEM_CATEGORY.ARK_GRID },
    { label: 'ë³´ì„', value: ITEM_CATEGORY.GEM },
    { label: 'ì•…ì„¸ì„œë¦¬', value: ITEM_CATEGORY.ACCESSORY },
    { label: 'ìƒí™œ', value: ITEM_CATEGORY.LIFESKILL },
  ];
  ```
  - UI ë Œë”ë§ìš© ì¹´í…Œê³ ë¦¬
* CategoryTabs ë Œë”ë§ ë°©ì‹
  ```javascript
  {CATEGORY_TABS.map((tab) => (
    <button
      key={tab.value}
      className={`category-tab ${
        selectedCategory === tab.value ? 'active' : ''
      }`}
      onClick={() => onSelect(tab.value)}
    >
      {tab.label}
    </button>
  ))}
  ```
  - map() ê¸°ë°˜ ë Œë”ë§
  - ì„ íƒëœ íƒ­ì€ active í´ë˜ìŠ¤ ì ìš©, í´ë¦­ ì‹œ ì„ íƒëœ ì¹´í…Œê³ ë¦¬ ê°’ì„ ìƒìœ„ë¡œ ì „ë‹¬

ItemList / ItemRow
------

&ensp;ItemListì™€ ItemRowëŠ” ì•„ì´í…œ ì‹œì„¸ ì¡°íšŒ í˜ì´ì§€ì—ì„œ ì•„ì´í…œ ëª©ë¡ í‘œì‹œì™€ ì„ íƒ ì¸í„°ë™ì…˜ì„ ë‹´ë‹¹í•˜ëŠ” í•µì‹¬ ì»´í¬ë„ŒíŠ¸ì´ë‹¤.

```javascript
import { useState, useMemo } from 'react';
import { ITEM_CATEGORY } from '../../constants/itemCategory';
import ItemRow from './ItemRow';
import './ItemList.css';

const ItemList = ({
  items,
  searchKeyword,
  selectedCategory,
  selectedItemId,
  onSelectItem,
}) => {
  const filteredItems = useMemo(() => {
    return items.filter((item) => {
      if (
        selectedCategory !== ITEM_CATEGORY.ALL &&
        item.category !== selectedCategory
      ) {
        return false;
      }

      if (searchKeyword && !item.name.includes(searchKeyword)) {
        return false;
      }

      return true;
    });
  }, [items, searchKeyword, selectedCategory]);

  return (
    <div className="item-list">
      {filteredItems.map((item) => (
        <ItemRow
          key={item.itemId}
          item={item}
          isSelected={item.itemId === selectedItemId}
          onClick={() => onSelectItem(item)}
        />
      ))}

      {filteredItems.length === 0 && (
        <div className="item-list-empty">
          ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.
        </div>
      )}
    </div>
  );
};

export default ItemList;
```

* ì»´í¬ë„ŒíŠ¸ ì—­í• 
  ```javascript
  const ItemList = ({
    items,
    searchKeyword,
    selectedCategory,
    selectedItemId,
    onSelectItem,
  }) => { ... }
  ```
  - ê²€ìƒ‰ì–´ ë° ì¹´í…Œê³ ë¦¬ ê¸°ë°˜ í•„í„°ë§
  - ì•„ì´í…œ ë¦¬ìŠ¤íŠ¸ ëœë”ë§
  - ì„ íƒëœ ì•„ì´í…œ ìƒíƒœ ì „ë‹¬
  - ë¹ˆ ê²°ê³¼ ì²˜ë¦¬
* í•„í„°ë§ ë¡œì§
  ```javascript
  const filteredItems = useMemo(() => {
    return items.filter((item) => {
      if (
        selectedCategory !== ITEM_CATEGORY.ALL &&
        item.category !== selectedCategory
      ) {
        return false;
      }

      if (searchKeyword && !item.name.includes(searchKeyword)) {
        return false;
      }

      return true;
    });
  }, [items, searchKeyword, selectedCategory]);
  ```
  - ë¶ˆí•„ìš”í•œ ì¬ê³„ì‚° ë°©ì§€ë¥¼ ìœ„í•´ useMemo ì‚¬ìš©
  - í•„í„° ì¡°ê±´ì„ ëª…í™•íˆ ë¶„ë¦¬
  - ì¹´í…Œê³ ë¦¬, ê²€ìƒ‰ì–´ ìˆœìœ¼ë¡œ ì¡°ê±´ ì ìš©
* ë¦¬ìŠ¤íŠ¸ ë Œë”ë§ ë°©ì‹
  ```javascript
  {filteredItems.map((item) => (
        <ItemRow
          key={item.itemId}
          item={item}
          isSelected={item.itemId === selectedItemId}
          onClick={() => onSelectItem(item)}
        />
  ))}
  ```
  - keyëŠ” itemId ê¸°ì¤€ìœ¼ë¡œ ì§€ì •
  - í´ë¦­ ì‹œ ì„ íƒëœ ì•„ì´í…œì„ ìƒìœ„ë¡œ ì „ë‹¬
  - ì„ íƒ ì—¬ë¶€ëŠ” boolean ê°’ìœ¼ë¡œë§Œ ì „ë‹¬
* ë¹ˆ ìƒíƒœ ì²˜ë¦¬
  ```javascript
  {filteredItems.length === 0 && (
        <div className="item-list-empty">
          ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.
        </div>
  )}
  ```
  - ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ëŠ” ê²½ìš°ì—ëŠ” ì‚¬ìš©ìì—ê²Œ ì¦‰ì‹œ í”¼ë“œë°±

```javascript
const ItemRow = ({ item, isSelected, onClick }) => {
  const isUp = item.priceChange > 0;
  const isDown = item.priceChange < 0;

  return (
    <div
      className={`item-row grade-${item.grade.toLowerCase()} ${
        isSelected ? 'selected' : ''
      }`}
      onClick={onClick}
    >
      {/* ì•„ì´ì½˜ */}
      <div className="item-icon-wrapper">
        <img
          src={item.iconUrl}
          alt={item.name}
          className="item-icon"
        />
      </div>

      {/* ì´ë¦„ + ë¬¶ìŒ */}
      <div className="item-info">
        <div className="item-name">{item.name}</div>
        <div className="item-bundle">x{item.bundleCount}</div>
      </div>

      {/* ê°€ê²© */}
      <div className="item-price">
        <div className="current-price">
          {item.currentPrice.toLocaleString()}
        </div>

        <div
          className={`price-change ${
            isUp ? 'up' : isDown ? 'down' : ''
          }`}
        >
          {isUp && '+'}
          {item.priceChange.toLocaleString()} ({item.changeRate}%)
        </div>
      </div>
    </div>
  );
};

export default ItemRow;
```

* ì»´í¬ë„ŒíŠ¸ ì—­í• 
  ```javascript
  const ItemRow = ({ item, isSelected, onClick }) => { ... }
  ```
  - ì•„ì´í…œ ì •ë³´ ì‹œê°í™”, ê°€ê²© / ë³€ë™ ì •ë³´ í‘œì‹œ, ì„ íƒ ìƒíƒœì— ë”°ë¥¸ UI ë³€í™”
* ê°€ê²© ë³€ë™ í‘œì‹œ ë¡œì§
  ```javascript
  const isUp = item.priceChange > 0;
  const isDown = item.priceChange < 0;

  <div className="current-price">
    {item.currentPrice.toLocaleString()}
  </div>

  <div
    className={`price-change ${
      isUp ? 'up' : isDown ? 'down' : ''
    }`}
  >
    {isUp && '+'}
    {item.priceChange.toLocaleString()} ({item.changeRate}%)
  </div>
  ```
  - ìƒìŠ¹: ë¹¨ê°„ìƒ‰, í•˜ë½: íŒŒë€ìƒ‰, ë³€ë™ ì—†ìŒ: ê¸°ë³¸ ìƒ‰ìƒ
* ì•„ì´í…œ ë“±ê¸‰ë³„ UI í‘œí˜„
  ```javascript
  <div
      className={`item-row grade-${item.grade.toLowerCase()} ${
        isSelected ? 'selected' : ''
      }`}
      onClick={onClick}
  >
  ```
  ```css
  .grade-common .item-icon-wrapper {
  background: linear-gradient(135deg, #313131, #585858);
  }
  ```
  - ì•„ì´í…œ ë“±ê¸‰ì— í•´ë‹¹í•˜ëŠ” ìƒ‰ìƒ ë§¤í•‘
* ì„ íƒëœ ì•„ì´í…œ ê°•ì¡°
  ```css
  /* ì„ íƒëœ ì•„ì´í…œ */
  .item-row.selected {
    background-color: #fff7ed;
    border-left: 4px solid #f97316;
  }
  ```

ItemDetail / ItemDetailHeader
------

&ensp;ì•„ì´í…œ ì‹œì„¸ ì¡°íšŒ í˜ì´ì§€ì˜ ìš°ì¸¡ ì˜ì—­ì€ ì„ íƒëœ ì•„ì´í…œì˜ í•µì‹¬ ì •ë³´ë¥¼ ì§ê´€ì ìœ¼ë¡œ ë³´ì—¬ì£¼ëŠ” ìƒì„¸ ì˜ì—­ì´ë‹¤.
```javascript
import './ItemDetailHeader.css';

const ItemDetailHeader = ({ item }) => {
  if (!item) return null;

  return (
    <div className="item-detail-header">
      <div className={`item-icon-wrapper grade-${item.grade.toLowerCase()}`}>
        <img
          src={item.iconUrl}
          alt={item.name}
          className="item-detail-icon"
        />
      </div>

      <span className="item-detail-name">
        {item.name}
      </span>
    </div>
  );
};

export default ItemDetailHeader;
```

```javascript
import './ItemDetail.css';

const ItemDetail = ({ item }) => {
  return (
    <div className="item-detail">
      <div className="item-detail-header">
        <div className={`detail-icon grade-${item.grade.toLowerCase()}`}>
          <img src={item.iconUrl} alt={item.name} />
        </div>

        <div className="detail-info">
          <div className="detail-name">{item.name}</div>
          <div className="detail-grade">{item.grade}</div>
        </div>
      </div>

      <div className="item-detail-price">
        <div className="price-label">í˜„ì¬ ìµœì €ê°€</div>
        <div className="price-value">
          {item.currentPrice.toLocaleString()} G
        </div>
      </div>
    </div>
  );
};

export default ItemDetail;
```