---
title: "4장 관계대수와 관계해석"
excerpt: "관계 모델과 관련이 있는 두 가지의 형식 질의어(formal query language)를 소개한다."

wirter: Myeongwoo Yoon
categories:
  - Introduction To Database
tags:
  - Programing

use_math: true
toc: true
toc_sticky: true
 
date: 2023-10-10
last_modified_at: 2023-10-10
---
**질의어**(query language)는 데이터베이스에 들어 있는 데이터에 대한 질문, 즉 **질의**(query)를 하기 위한 특수 언어이다. 관계대수(relational algebra)에서 질의들은 여러 연산자들을 이용해서 구성되며, 각 질의는 원하는 해답을 계산하기 위한 단계적 절차를 기술한다. 즉, 질의들은 조작적인 방법으로 명시된다. 관계해석(relational calculus)에서 질의는 해답이 계산되는 방법을 명시하지 않고 원하는 답을 기술한다. 이러한 비 절차적인 질의 스타일을 선억적(declarative)이라고 한다.<br/><br/>
한 질의의 입력과 출력의 형태는 릴레이션이다. 질의는 각 입력 릴레이션의 인스턴스를 이용하여 계산되며 출력 릴레이션의 인스턴스를 산출한다. 다음의 스키마를 이용하여 다양한 샘플 질의들을 소개한다.<br/>
<p align="center"><img src="/assets/img/Introduction-To-Database/4장-관계대수와-관계해석/4-1-1.jpg" width="500" height="200"></p>

키 필드들에는 밑줄을 긋고, 각 필드의 도메인은 필드 이름 다음에 열거한다. 따라서 sid는 Sailors의 키이고, bid는 Boats의 키이며, Reserves에서는 세 필드 모두가 키를 형성한다.<br/>
<p align="center"><img src="/assets/img/Introduction-To-Database/4장-관계대수와-관계해석/4-1-2.jpg" width="500" height="200"></p>


관계대수
======
**관계대수식**(relational algebra expression)은 한 릴레이션, 단일 식에 적용되는 단항(unary) 대수 연산자, 또는 두 개의 식에 적용되는 이항(binary) 대수 연산자로 순환적으로 정의된다. 여기에서는 관계대수의 기본 연산자들과 몇 가지 추가적인 연산자들을 기술한다.<br/><br/>
**기본 연산자**(Basic operations)
* **셀렉션( Selection, $\sigma$ )**: 릴레이션으로부터 행들을 선택하기 위한 연산자
* **프로젝션( Projection, $\pi$ )**: 릴레이션으로부터 열들을 선택하기 위한 연산자
* **크로스 프로덕트( Cross-product, $\times$ )**: R$\times$S는 그 스키마가 R의 모든 필드 다은에 S의 모든 필드들을 순서대로 포함하는 릴레이션 인스턴스를 반환한다.
* **차집합( Set-difference, $-$ )**: R-S는 R에는 속하고 S에는 속하지 않는 투플들로 구성된 릴레이션 인스턴스를 반환한다.
* **합집합( union, $\cup$ )**: R$\cup$S는 R이나 S에 나타나는 모든 투플들을 포함하는 릴레이션 인스턴스를 반환한다.

**추가적인 연산자**
* 교집합(intersection), 조인(join), 디비전(division), 이름바꾸기(renaming)

프로젝션
------
프로젝션 연산자 $\pi$는 한 릴레이션으로부터 열들을 추출한다. 예를 들어, $\pi$를 사용하여 모든 뱃사람의 이름과 등급을 구할 수 있다.<br/>
<center>$\pi_{sname,rating}(S2)$</center><br/>
위 식은 다음 그림과 같은 릴레이션을 결과로 산출한다.<br/>
<p align="center"><img src="/assets/img/Introduction-To-Database/4장-관계대수와-관계해석/4-2-1.jpg" width="100" height="200"></p>

아래 첨자 sname, rating은 유지될 필드들을 명시하고, 나머지 필드들은 모두 제거된다. 뱃사람들의 나이만 구한다고 하자.<br/>
<center>$\pi_{age}(S2)$<br/></center>
위 식은 다음과 같은 릴레이션을 결과로 산출한다.<br/>
<p align="center"><img src="/assets/img/Introduction-To-Database/4장-관계대수와-관계해석/4-2-2.jpg" width="100" height="200"></p>

세 명의 뱃사함이 나이가 35세이지만, 이 프로젝션의 결과에는 age=35.0인 단일 투플이 나타나는 것이다. 이것은 릴레이션이 투플들의 집합이라는 정의에 따른 결과이다.

셀렉션
------
셀렉션 연산자 $\sigma$는 한 릴레이션으로부터 행들을 추출한다. 예를 들어, $\sigma$연산자를 사용하여 경험이 많은 뱃사람에 해당하는 투플들을 검색할 수 있다.<br/>
<center>$\sigma_{rating>8}(S2)$<br/></center>
위 식은 다음과 같은 릴레이션을 결과로 산출한다.<br/>
<p align="center"><img src="/assets/img/Introduction-To-Database/4장-관계대수와-관계해석/4-2-3.jpg" width="200" height="100"></p>
 
 프로젝션과 셀렉션을 조합하여 등급이 아주 높은 뱃사람들의 이름과 등급을 계산할 수 있다.<br/>
<center>$\pi_{sname,rating}(\sigma_{rating>8}(S2))$<br/></center>
위 식은 다음과 같은 릴레이션을 결과로 산출한다.<br/>
<p align="center"><img src="/assets/img/Introduction-To-Database/4장-관계대수와-관계해석/4-2-4.jpg" width="200" height="150"></p>

셀렉션 연산자는 셀렉션 조건을 통해 유지할 투플들을 명시한다. 일반적으로, 이 셀렉션 조건은 _애트리뷰트 op 상수_ 또는 _애트리뷰트1 op 애트리뷰트2_ 라는 형태의 항들을 불리언으로 조합한 것이다. 여기서 op는 비교 연산자 $<, >=, =, \neq$ $, >=, >$ 중의 하나이다. 

합집합, 교집합, 차집합
------
* 합집합(union: $\cup$): R $\cup$ S는 R이나 S에 나타나는 모든 투플들을 포함하는 릴레이션 인스턴스를 반환한다.
* 교집합(intersection: $\cap$): R $\cap$ S는 R과 S에 모두 속하는 투플들을 포함하는 릴레이션 인스턴스를 반환한다.
* 차집합(set-difference: $-$): R $-$ S는 R에는 속하고 S에는 속하지 않는 투플들로 구성된 릴레이션 인스턴스를 반환한다.

위 연산의 모든 릴레이션 인스턴스 R, S는 서로 **합병가능(union-compatible)**해야하고 결과의 스키마는 R의 스키마와 동일하다.<br/>


크로스 프로덕트
------



조인
-------


디비전
------


