---
title: "20장 물리적 데이터베이스 설계와 튜닝"
excerpt: "DBMS의 성능이 데이터베이스 설계의 궁극적인 척도이다. 좋은 성능을 달성하기 위한 첫 번째 단계는 데이터베잇 설계를 잘 하는 것이다."

wirter: Myeongwoo Yoon
categories:
  - Introduction To Database
tags:
  - Programing

use_math: true
toc: true
toc_sticky: true
 
date: 2023-12-06
last_modified_at: 2023-12-06
---

　개념 스키마와 외부 스키마, 즉 릴레이션, 뷰, 그에 따르는 무결성 제약조건들을 설계한 후, 물리적 스키마(physical schema)를 설계하는 **물리적 테이터베이스 설계(physical database design)** 과정을 통해 성능측면에서 목표를 다루어야 한다. 사용자의 요구사항들이 바뀜에 따라서, 좋은 성능을 보장하기 위해서는 일반적으로 데이터베이스 설계의 모든 측면들을 **튜닝(tuning)** 또는 조정할 필요가 있다.

물리적 데이터베이스 설계 개요
======

데이터베이스 작업부하
------
　좋은 물리적 설계를 위한 핵심은 예상 작업부하를 정확하게 기술하는 것이다. 데이터베이스가 지원해야만 하는 전형적인 **작업부하(workload)**를 이해하는 것이 중요하다. 작업부하는 질의와 갱신들로 이루어진다. **작업부하 기술(workload description)**은 다음 사항들을 포함한다.
* 질의 리스트(모든 질의/갱신연산의 비율로써 빈도)
* 갱신연산 리스트와 빈도
* 각 유형의 질의와 갱신에 대한 성능 목표

물리적 설계와 튜닝 결정사항
------
　물리적 데이터베이스 설계와 데이터베이스 튜닝 시 중요한 결정사항들은 다음과 같다.
* 생성할 인덱스의 선택
  - 어느 릴레이션에 인덱스를 만들 것이며 어느 필드 또는 어떤 필드들의 조합을 인덱스의 탐색키로 할 것이가?
  - 각 인덱스가 클러스터 또는 클러스터되지 않은 인덱스로 할 것인가?
  - Hash/ tree?
* 개념 스카마의 튜닝
  - 정규화된 스키마의 여러 대안들
    + 한 스키마를 원하는 정규형(BCNF 또는 3NF)으로 여러 가지 방법으로 분해할 수 있다.
    + 성능 기준을 기반으로 해서 선택을 해야 한다.
  - 반정규화(denormalication)
    + 분해된 여러 릴레이션들의 애트리뷰트들을 참고하는 질의의 성능을 향상시키기 위해, 개념 스키마 설계 과정에서 정규화를 통해 수행된 스키마 분해를 재고할 수 있다.
  - 수직분할(vertical partitioning)
    + 어떤 환경에서는 몇 개의 애트리뷰트만을 사용하는 질의릐 성능을 향상시키기 위해 릴레이션을 추가로 더 분해할 수 있다.
  - 뷰
    + 개념 스키마의 변경사항을 사용자에게 감추기 위하여 몇몇 뷰를 추가할 수도 있다.

인덱스 선택을 위한 가이드라인
======
　인덱스를 선택하는 하나의 방법은 가장 중요한 질의를 차례로 고려하면서, 각 질의에 대해 현재의 인덱스 리스트의 인덱스들이 주여졌을 때 최적화기가 어떤 계획을 생성할 지를 결정하는 것이다. 그런 후에, 인덱스들을 더 추가하면 상당히 더 나은 실행 계획이 가능할 지를 고려한다. 일반적으로 범위 검색에서는 B+트리가 좋으며, 완전일치 검색에는 해시 인덱스가 좋다. 클러스터링은 범위 질의에 도움이 되며, 키 값이 같은 여러 데이터 엔트리들이 있는 경우에는 완전일치 질의에도 도움이 된다.<br/>
　완전일치 셀렉션 조건에 대해서는 선택된 애트리뷰트에 대해서는 해시 인덱스를 고려하지만 범위 셀렉션 조건에 대래서는 선택된 애트리뷰트에 대해 B+ 트리 인덱스를 고려한다.<br/>
　인덱스가 인덱스 중첩루프 조인을 지원할 때 해시 인덱스가 더 좋다. 인덱스된 릴레이션이 내부 릴레이션이며, 탐색키가 조인 칼럼을 포함한다.

인덱스 선택의 기본적인 예제
======